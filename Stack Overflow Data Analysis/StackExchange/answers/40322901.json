{"title": "Custom source for Crypto++", "tags": ["c++", "crypto++"], "creation_date": 1477769652, "score": 0, "body": "<p>I had to look at the source code of crypto++ and copy most of the implementation from <a href=\"https://www.cryptopp.com/docs/ref/class_file_source.html\" rel=\"nofollow\"><code>FileSource</code></a> class. The relevant files are <a href=\"https://www.cryptopp.com/docs/ref/files_8h_source.html\" rel=\"nofollow\"><code>files.h</code></a> and <a href=\"https://www.cryptopp.com/docs/ref/files_8cpp_source.html\" rel=\"nofollow\"><code>files.cpp</code></a>.</p>\n\n<p>First, we need to look at the <a href=\"https://www.cryptopp.com/docs/ref/class_file_source.html\" rel=\"nofollow\"><code>FileSource</code></a> class. It inherits from <code>SourceTemplate&lt;FileStore&gt;</code>. So we need to examine <a href=\"https://www.cryptopp.com/docs/ref/class_file_store.html\" rel=\"nofollow\"><code>FileStore</code></a> class. It inherits from <code>Store</code>, <code>FilterPutSpaceHelper</code> and <code>NotCopyable</code>. We need to create class which also inherits from these classes.</p>\n\n<p>Our store class must have a default constructor and implement the following virtual functions: <code>TransferTo2</code>, <code>CopyRangeTo2</code> and <code>StoreInitialize</code>. <code>StoreInitialize</code> can be private.</p>\n\n<p>Finally, our source class needs only constructors and if you look at <a href=\"https://www.cryptopp.com/docs/ref/files_8h_source.html\" rel=\"nofollow\"><code>files.h</code></a>, <a href=\"https://www.cryptopp.com/docs/ref/class_file_source.html\" rel=\"nofollow\"><code>FileSource</code></a> is implemented entirely in a header file.</p>\n\n<p>The full implementation code is confined to <a href=\"https://www.cryptopp.com/docs/ref/files_8h_source.html\" rel=\"nofollow\"><code>files.h</code></a> and <a href=\"https://www.cryptopp.com/docs/ref/files_8cpp_source.html\" rel=\"nofollow\"><code>files.cpp</code></a> so there's no need to copy it in this answer.</p>\n", "last_activity_date": 1477770016, "answer_id": 40322901, "is_accepted": true, "owner": {"user_id": 3624760, "reputation": 958, "user_type": "registered", "accept_rate": 93, "display_name": "FaTony", "link": "http://stackoverflow.com/users/3624760/fatony", "profile_image": "https://www.gravatar.com/avatar/a87df3638100e03b735c17112b4b0c3f?s=128&d=identicon&r=PG&f=1"}, "last_edit_date": 1477770016, "question_id": 40264656}