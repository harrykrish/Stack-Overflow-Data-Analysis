{"title": "Getting an Arraylist from an inner AsyncTask class", "tags": ["java", "android", "arraylist", "android-asynctask"], "creation_date": 1477721606, "score": 4, "body": "<p>1) You should declare the ArrayList variable as a member of mainActivity and <em>then pass its reference into the Asynctask.</em></p>\n\n<p>2) You can verify that the data is present in the list, only after you are sure the Asynctask has completed processing. (You can do that within the <em>onPostExecute</em> of the AsyncTask).</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\nArrayList&lt;NewsItems&gt;myData=new ArrayList&lt;&gt;(); //No need for static\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    ReadRss readRss = new ReadRss(this,myData); //Pass the list variable reference into the asynctask instance\n    readRss.execute();\n   Log.d(\"TAG\", String.valueOf(myData.size()));//This will be empty due to concurrent call to asynctask, which executes parallel to main thread.\n}\n\n\npublic void getData(ArrayList&lt;NewsItems&gt;items){//Static qualifier unneccessary here\n    for (int i=0; i&lt;items.size(); i++){\n        myData.add(items.get(i));\n    }\n}\nclass ReadRss extends AsyncTask&lt;Void, Void, Void&gt;{\n\n     ArrayList&lt;NewsItems&gt;feedItems = new ArrayList&lt;&gt;();\n    Context context;\n    String address = \"http://www.thedailystar.net/frontpage/rss.xml\";\n    ProgressDialog progressDialog;\n    URL url;\n\n    public ReadRss(Context context,ArrayList&lt;NewsItems&gt; feedItems) {\n        this.context = context;\n        this.feedItems = feedItems; //Assign the reference of the list here so that modifications done within the Asynctask are reflected in the MainActivity\n        progressDialog = new ProgressDialog(context);\n        progressDialog.setMessage(\"Loading...\");\n    }\n\n    @Override\n    protected void onPreExecute() {\n        if(progressDialog!=null){\n            if (!progressDialog.isShowing()){\n                progressDialog.show();\n            }\n        }\n        super.onPreExecute();\n    }\n\n    @Override\n    protected void onPostExecute(Void aVoid) {\n        super.onPostExecute(aVoid);\n        if(progressDialog!=null){\n            if (progressDialog.isShowing()){\n                progressDialog.hide();\n            }\n\n\n        }\n   //Do whatever you need with the arraylist data here\n        getData(feedItems);\n    }\n\n    @Override\n    protected Void doInBackground(Void... params) {\n        ProcessXml(Getdata());\n        return null;\n    }\n</code></pre>\n", "last_activity_date": 1477757935, "answer_id": 40316589, "is_accepted": false, "owner": {"user_id": 2786452, "reputation": 1908, "user_type": "registered", "accept_rate": 46, "display_name": "SoulRayder", "link": "http://stackoverflow.com/users/2786452/soulrayder", "profile_image": "https://i.stack.imgur.com/Lv1Er.jpg?s=128&g=1"}, "last_edit_date": 1477757935, "question_id": 40316548}