{"body": "<p>You currently do <code>{% for cert_type in pillar.get('pem_certs', {}) %}</code> which returns an empty dict if not present in the minion's pillar - i guess this is the first thing to start with.</p>\n\n<p>For debugging you want to <strong>know</strong> if there is data available for your minion by doing something like <code>salt 'minionid' pillar.get pem_certs</code>. if this does not show up the pillar data, check your pillar's top.sls. Is the pillar data applied to your minion properly?</p>\n\n<p>Further you should consider using <code>{% for cert_type, cert_data in pillar.get('pem_certs', {}).iteritems() %}</code> - if doing so, you can directly hand over the content to the context of your <code>file.manage</code> template and no longer need to query for pillar data inside of the template anymore.</p>\n", "tags": ["jinja2", "salt", "salt-stack"], "creation_date": 1477577361, "score": 1, "last_activity_date": 1477577361, "answer_id": 40286834, "is_accepted": true, "owner": {"user_id": 5992118, "reputation": 839, "user_type": "registered", "display_name": "dahrens", "link": "http://stackoverflow.com/users/5992118/dahrens", "profile_image": "https://www.gravatar.com/avatar/08ae2e7ce567cbfb93d480892bd10fa0?s=128&d=identicon&r=PG"}, "title": "Saltstack and making states generic", "question_id": 40286116}