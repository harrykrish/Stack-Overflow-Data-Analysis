{"title": "typoscript: do not show submenu if certain backend_layout is selected", "tags": ["typo3", "typoscript", "typo3-7.6.x"], "creation_date": 1477032159, "score": 1, "body": "<p>First of all: have you set <code>TMENU.IFSUB = 1</code>?\nElse, everything you do in <code>IFSUB</code> won't have an effect.</p>\n\n<p>Now some general thoughts:</p>\n\n<p>a) Normally, backend layouts are used to switch an entire page template:</p>\n\n<pre><code>page.10 = FLUIDTEMPLATE\npage.10 {\n  file.stdWrap.cObject = CASE\n  file.stdWrap.cObject {\n    key.data = pagelayout\n\n    default = TEXT\n    default.value = {$myTemplatePath}/Standard.html\n\n    1 = TEXT\n    1.value = {$myTemplatePath}/Home.html\n\n    2 = TEXT\n    2.value = {$myTemplatePath}/Landing.html\n\n  }\n  layoutRootPath = {$myLayoutPath}\n  partialRootPath = {$myPartialPath}\n}\n</code></pre>\n\n<p>So this initiates the frontend rendering for the entire page, where backend_layout with uid 1 will use the <code>Home.html</code> template, backend_layout with uid 2 will use the <code>Landing.html</code> template, and all others (=default) will use the <code>Standard.html</code> template.</p>\n\n<p>If you build your site by this method, I would recommend doing</p>\n\n<pre><code># that's the original version of your menu\nlib.panmenu = HMENU\nlib.panmenu {\n // ...\n}\n\n# make a copy of the original \nlib.panmenu_variant &lt; lib.panmenu\n# modify it as required \nlib.panmenu_variant.1.NO {   \n  // ... \n}\n</code></pre>\n\n<p>Now, in your page Templates (which you call separately via the <code>CASE</code> from above), you can either use</p>\n\n<pre><code>&lt;f:cObject typoscriptObjectPath=\"lib.panmenu\" /&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;f:cObject typoscriptObjectPath=\"lib.panmenu_variant\" /&gt;\n</code></pre>\n\n<p>b) But if you don't want to follow that approach, you should also be able to use the backend_layout <code>CASE</code> on any <code>cObject</code>.  The <code>CASE</code> variant has proven much more robust for me. </p>\n\n<p>Here' how I'd try to get the CASE working (untested!) </p>\n\n<pre><code>// suppose temp.navigation_main is your full menu\ntemp.navigation_main_variant &lt; temp.navigation_main \ntemp.navigation_main_variant {\n    // modify the menu as you please\n    10.2 &gt;\n    10.1.IFSUB.wrapItemAndSub = &lt;li&gt;|&lt;/li&gt;\n}\n\n// use lib.nav in your page\nlib.nav = CASE\nlib.nav {\n    key.data = pagelayout\n    // normally, lib.nav is the full navigation\n    default &lt; lib.navigation_main\n    // except if be layout 1 is selected\n    1 &lt; lib.navigation_main_variant\n  }\n}\n</code></pre>\n\n<p>c) I've tried TypoScript constructions with <code>LOAD_REGISTER</code> and <code>if</code>s years ago and they always made me go crazy. I wouldn't invest too much energy into them, as  they rather seem to be legacy parameters than the future way of development for TYPO3 logic.</p>\n", "last_activity_date": 1477397089, "answer_id": 40169975, "is_accepted": false, "owner": {"user_id": 160968, "reputation": 2573, "user_type": "registered", "accept_rate": 78, "display_name": "Urs", "link": "http://stackoverflow.com/users/160968/urs", "profile_image": "https://www.gravatar.com/avatar/83bcda00f1bffcad1deb5f2112bb5c3e?s=128&d=identicon&r=PG"}, "last_edit_date": 1477397089, "question_id": 40145253}