{"title": "Use of MBProgressHUD Globally + make it singleton", "tags": ["iphone", "ios", "singleton", "mbprogresshud"], "creation_date": 1397466294, "score": 7, "body": "<h1>NOTE...</h1>\n\n<p>as with many iOS issues, this is now drastically, totally out of date.</p>\n\n<p>These days you certainly just use a trivial </p>\n\n<h1>Container view</h1>\n\n<p>for any issue like this.</p>\n\n<p>Full container view tutorial for beginners .. <a href=\"http://stackoverflow.com/a/23403979/294884\">tutorial!</a></p>\n\n<p>MBProgressHUD was a miraculous solution back in the day, because there was a \"drastic hole\" in Apple's pipeline.</p>\n\n<p>But (as with many wonderful things from the past), this is only history now. Don't do anything like this today.</p>\n\n<hr>\n\n<p>Just FWIW, 2014, here's a very simple setup we use.  Per David Lawson...</p>\n\n<pre><code>UIWindow *window = [[UIApplication sharedApplication] delegate].window\n</code></pre>\n\n<p>as Matej says, just use AppDelegate...</p>\n\n<pre><code>#define APP ((AppDelegate *)[[UIApplication sharedApplication] delegate])\n</code></pre>\n\n<p>AppDelegate.h</p>\n\n<pre><code>// our convenient huddie system (messages with a hud, spinner)\n@property (nonatomic, strong) MBProgressHUD *hud;\n-(void)huddie;\n</code></pre>\n\n<p>AppDelegate.m</p>\n\n<pre><code>-(void)huddie\n{\n// centralised location for MBProgressHUD\n[self.hud hide:YES];\n\nUIWindow *windowForHud = [[UIApplication sharedApplication] delegate].window;\nself.hud = [MBProgressHUD showHUDAddedTo:windowForHud animated:YES];\n\nself.hud.dimBackground = YES;\nself.hud.minShowTime = 0.1;\nself.hud.labelText = @\"\";\nself.hud.detailsLabelText = @\"\";\n}\n</code></pre>\n\n<p>Set the titles <strong>in your code where you are using it</strong> - because <strong>you very often change them</strong> during a run.  (\"Step 1\" ... \"Step 2\" etc)</p>\n\n<pre><code>-(void)loadBlahFromCloud\n{\n[APP huddie];\nAPP.hud.labelText = @\"Connecting to Parse...\";\nAPP.hud.detailsLabelText = @\"step 1/2\";\n\n[blah refreshFromCloudThen:\n    ^{\n    [... example];\n    }];\n}\n\n-(void)example\n{\nAPP.hud.labelText = @\"Connecting to the bank...\";\nAPP.hud.detailsLabelText = @\"step 2/2\";\n\n[blah sendDetailsThen:\n    ^{\n    [APP.hud hide:YES];\n    [...  showNewDisplay];\n    }];\n}\n</code></pre>\n\n<p>Change huddle to take the texts as an argument if you wish</p>\n\n<p>You always want <strong>self.hud.minShowTime = 0.1;</strong> to avoid flicker</p>\n\n<p>Almost always <strong>self.hud.dimBackground = YES;</strong> which also blocks UI</p>\n\n<p>Conceptually of course <strong>you usually have to \"slightly wait\" to begin work / end work</strong> when you bring up such a process, as with any similar programming with the UI.</p>\n\n<p>So in practice code will usually look like this...</p>\n\n<pre><code>-(void)loadActionSheets\n{\n[APP huddie];\nAPP.hud.labelText = @\"Loading json from net...\";\n\ndispatch_after_secs_on_main(0.1 ,\n    ^{\n    [STUBS refreshNowFromCloudThen:\n        ^{\n        [APP.hud hide:YES];\n        dispatch_after_secs_on_main(0.1 , ^{ [self buildActionsheet]; });\n        }];\n        }\n    );\n}\n</code></pre>\n\n<p>Handy macro ..</p>\n\n<pre><code>#define dispatch_after_secs_on_main( SS, BB )                   \\\n        dispatch_after(                                         \\\n            dispatch_time(DISPATCH_TIME_NOW, SS*NSEC_PER_SEC),  \\\n            dispatch_get_main_queue(),                          \\\n            BB                                                  \\\n            )\n</code></pre>\n\n<hr>\n\n<p>This is all history now  :)  <a href=\"http://stackoverflow.com/a/23403979/294884\">http://stackoverflow.com/a/23403979/294884</a></p>\n", "last_activity_date": 1477150742, "answer_id": 23056076, "is_accepted": false, "owner": {"user_id": 294884, "reputation": 15622, "user_type": "registered", "accept_rate": 89, "display_name": "Joe Blow", "link": "http://stackoverflow.com/users/294884/joe-blow", "profile_image": "https://www.gravatar.com/avatar/f8675693dfeb3908195657eb3a3fdda4?s=128&d=identicon&r=PG"}, "last_edit_date": 1477150742, "question_id": 12033080}