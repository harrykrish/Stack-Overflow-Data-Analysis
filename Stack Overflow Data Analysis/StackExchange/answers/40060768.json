{"title": "In an Android fragment no sound is played after an onClick event", "tags": ["android", "android-fragments", "android-mediaplayer"], "creation_date": 1476544647, "score": 2, "body": "<p>Your problem is you are stopping and releasing the mediaplayer just after when it is started. Remove the stop method from your code and sound will be played.</p>\n\n<p>And now just removing stop will not solve your whole problem you have to do some work now if you want to use <code>MediaPlayer</code> class because <code>MediaPlayer</code> requires a lot of work around</p>\n\n<p>If your sound or audio is small in duration you should use <code>SoundPool</code> class .</p>\n\n<p>Your problem seems similar to this question which i have answered earlier.<a href=\"http://stackoverflow.com/questions/39308890/imagebutton-with-sound-is-not-working/39309699#39309699\">link</a></p>\n\n<p><strong>To Solve your problem:</strong></p>\n\n<p><strong>Solution 1:</strong></p>\n\n<p>Declare <code>mediaPlayer</code> in Activity class holding the fragments and implement <code>TabLayout.OnTabSelectedListener</code></p>\n\n<pre><code>... MainActivity extends AppCompatActivity implements TabLayout.OnTabSelectedListener{...\n    MediaPlayer mediaPlayer = null;\n    ....\n@Override\npublic void onTabSelected(TabLayout.Tab tab) \n{\nint position= tab.getPosition();\nswitch(position)\n  {\n  case 1: if(mediaPlayer!=null)\n            {\n            mediaPlayer.stop();\n            mediaPlayer.realse();\n            }\n  break;\n  case 2: if(mediaPlayer!=null)\n            {\n            mediaPlayer.stop();\n            mediaPlayer.realse();\n            }\n  break;\n  ....\n  }\n....\n}\n</code></pre>\n\n<p>Now in your Fragment just add MainActivity's reference like this:</p>\n\n<pre><code>public class AnimalsFragment extends Fragment {\nprivate ImageView imageView;\nprivate MainActivity mainActivity;\n\n@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n    View v = null;\n    mainActivity=(MainActivity)getActivity();\n    ....\n    ....\n    imageView.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            // Start playback.\n           mainActivity.mediaPlayer=MediaPlayer.create(mainActivity, R.raw.song);\n           mediaPlayer.start();\n\n           ....\n           ....\n         ....}\n</code></pre>\n\n<p>I hope this will work.</p>\n", "last_activity_date": 1477131206, "answer_id": 40060768, "is_accepted": false, "owner": {"user_id": 4755399, "reputation": 224, "user_type": "registered", "accept_rate": 90, "display_name": "Dushyant Suthar", "link": "http://stackoverflow.com/users/4755399/dushyant-suthar", "profile_image": "https://lh6.googleusercontent.com/-msTJIz_air4/AAAAAAAAAAI/AAAAAAAAAHk/rYWTAGBnSRk/photo.jpg?sz=128"}, "last_edit_date": 1477131206, "question_id": 40060667}