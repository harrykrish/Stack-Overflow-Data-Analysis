{"title": "How do I deploy a golang app with Apache installed on Ubuntu 16.04 on digitalocean?", "tags": ["apache", "go", "deployment", "digital-ocean", "ubuntu-16.04"], "creation_date": 1477570664, "score": 3, "body": "<p>Note: Almost everything in this answer needs to be customized to your specific circumstances. This is written with the assumption that your Go app is called \"myapp\" and you have made it listen at port 8001 (and many others).</p>\n\n<p>You should make a <em>systemd unit file</em> to make your app start up automatically at boot. Put the following in <code>/etc/systemd/system/myapp.service</code> (adapt to your needs):</p>\n\n<pre><code>[Unit]\nDescription=MyApp webserver\n\n[Service]\nExecStart=/www/myapp/bin/webserver\nWorkingDirectory=/www/myapp\nEnvironmentFile=-/www/myapp/config/myapp.env\nStandardOutput=journal\nStandardError=inherit\nSyslogIdentifier=myapp\nUser=www-data\nGroup=www-data\nType=simple\nRestart=on-failure\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n\n<p>For documentation of these settings see: <code>man systemd.unit</code>, <code>man systemd.service</code> and <code>man systemd.exec</code></p>\n\n<p>Start it:</p>\n\n<pre><code>systemctl start myapp\n</code></pre>\n\n<p>Check that it is ok:</p>\n\n<pre><code>systemctl status myapp\n</code></pre>\n\n<p>Enable automatic startup:</p>\n\n<pre><code>systemctl enable myapp\n</code></pre>\n\n<p>Then it is time to configure Apache virtualhost for your app. Put the following in <code>/etc/apache2/sites-available/myapp.conf</code>:</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n        ServerName myapp.example.com\n        ServerAdmin webmaster@example.com\n        DocumentRoot /www/myapp/public\n        ErrorLog ${APACHE_LOG_DIR}/myapp-error.log\n        CustomLog ${APACHE_LOG_DIR}/myapp-access.log combined\n\n        ProxyPass \"/\" \"http://localhost:8001/\"\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>Documentation of the proxy related settings: <a href=\"https://httpd.apache.org/docs/2.4/mod/mod_proxy.html\" rel=\"nofollow\">https://httpd.apache.org/docs/2.4/mod/mod_proxy.html</a></p>\n\n<p>Enable the configuration:</p>\n\n<pre><code>a2ensite myapp\n</code></pre>\n\n<p>Make sure you did not make mistake in Apache configuration:</p>\n\n<pre><code>apachectl configtest\n</code></pre>\n\n<p>In case the proxy modules are not previously enabled you will get an error at this point. In that case enable the proxy modules and try again:</p>\n\n<pre><code>a2enmod proxy\na2enmod proxy_http\napachectl configtest\n</code></pre>\n\n<p>Reload Apache configuration:</p>\n\n<pre><code>systemctl reload apache2\n</code></pre>\n\n<p>Remember to make the name <code>myapp.example.com</code> available in DNS.</p>\n\n<p>That's it!</p>\n\n<p>EDIT: Added pointers to documentation and instructions for enabling Apache modules if needed. Use apachectl for config test.</p>\n", "last_activity_date": 1477678014, "answer_id": 40284391, "is_accepted": true, "owner": {"user_id": 872918, "reputation": 1870, "user_type": "registered", "accept_rate": 75, "display_name": "snap", "link": "http://stackoverflow.com/users/872918/snap", "profile_image": "https://www.gravatar.com/avatar/8b89d3f5413870b28a39767f0289c32b?s=128&d=identicon&r=PG"}, "last_edit_date": 1477678014, "question_id": 40282697}