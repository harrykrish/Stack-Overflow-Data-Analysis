{"body": "<p>In my case the issue was <code>mod_remoteip</code>.</p>\n\n<p>The loadbalancer masquerades IPv6 addresses whith brackets like this in the via header\n<code>Via: 1.1 [2a02:2e0:40c:ffff::3]:80</code></p>\n\n<p>This is part of the <a href=\"http://tools.ietf.org/html/rfc7239\" rel=\"nofollow\">RFC7239</a> IPv6 address notation due to the fact that it's sometimes necassary to specify the port which is also seperated by a colon.</p>\n\n<p><code>mod_remoteip</code> is not able to interpret such addresses. This has been also noted below <a href=\"http://httpd.apache.org/docs/trunk/mod/mod_remoteip.html\" rel=\"nofollow\"><code>mod_remoteip</code> documentation</a> within the apache devel version by Lee Maguire.</p>\n\n<blockquote>\n  <p>I assume that mod_remoteip does not currently support RFC 7239 syntax\n  <a href=\"http://tools.ietf.org/html/rfc7239\" rel=\"nofollow\">http://tools.ietf.org/html/rfc7239</a></p>\n  \n  <p>X-Forwarded-For: 192.0.2.43, 2001:db8:cafe::17</p>\n  \n  <p>becomes:</p>\n  \n  <p>Forwarded: for=192.0.2.43, for=\"[2001:db8:cafe::17]\"</p>\n</blockquote>\n", "tags": ["curl", "http-headers", "ipv6", "apache2.4"], "creation_date": 1477678201, "score": 0, "last_activity_date": 1477678201, "answer_id": 40310893, "is_accepted": true, "owner": {"user_id": 3271948, "reputation": 161, "user_type": "registered", "accept_rate": 83, "display_name": "mat1010", "link": "http://stackoverflow.com/users/3271948/mat1010", "profile_image": "https://www.gravatar.com/avatar/c30d308ae066b22d269fb6a889617819?s=128&d=identicon&r=PG&f=1"}, "title": "X-Forwarded-For 127.0.0.6 when using IPv6", "question_id": 39237887}