{"body": "<ol>\n<li><p>Make a service :</p>\n\n<pre><code>public class MyService extends Service {\nprivate DefaultBinder mBinder;\nprivate AlarmManager  alarmManager ;\nprivate PendingIntent alarmIntent;\n\nprivate void setAlarmIntent(PendingIntent alarmIntent){\nthis.alarmIntent=alarmIntent;\n}\n\npublic void onCreate() {\nalarmManager (AlarmManager)getSystemService(Context.ALARM_SERVICE);\nmBinder = new DefaultBinder(this);\n}\n\n @Override\n public IBinder onBind(Intent intent) {\n  return mBinder;\n }\n\n public void onTaskRemoved (Intent rootIntent){\n alarmManager.cancel(alarmIntent);\n this.stopSelf();\n}\n}\n</code></pre></li>\n<li><p>Make a custom class :</p>\n\n<pre><code>public class DefaultBinder extends Binder {\n    MyService s;\n\n    public DefaultBinder( MyService s) {\n        this.s = s;\n    }\n\n    public MyService getService() {\n        return s;\n    }\n}\n</code></pre></li>\n<li><p>Add to your activity :</p>\n\n<pre><code>MyService service;\nprotected ServiceConnection mConnection = new ServiceConnection() {\n    public void onServiceConnected(ComponentName className, IBinder binder) {\nservice = ((DefaultBinder) binder).getService();\nservice.setAlarmIntent(pIntent);\n    }\n\n    public void onServiceDisconnected(ComponentName className) {\n        service = null;\n    }\n        };\n\nprotected void onResume() {\n    super.onResume();\n    bindService(new Intent(this, MainService.class), mConnection,\n            Context.BIND_AUTO_CREATE);\n}\n\n@Override\nprotected void onStop() {\n    super.onStop();\n\n    if (mConnection != null) {\n        try {\n            unbindService(mConnection);\n        } catch (Exception e) {}\n    }\n}\n</code></pre></li>\n</ol>\n", "tags": ["android", "android-activity", "android-lifecycle"], "creation_date": 1456872085, "score": 1, "last_activity_date": 1456872085, "answer_id": 35735066, "is_accepted": true, "owner": {"user_id": 2674654, "reputation": 81, "user_type": "registered", "display_name": "Mohammad moradyar", "link": "http://stackoverflow.com/users/2674654/mohammad-moradyar", "profile_image": "https://i.stack.imgur.com/n5WfZ.jpg?s=128&g=1"}, "title": "Whi\u0441h function is called when application is removed from task manger", "question_id": 35729654}