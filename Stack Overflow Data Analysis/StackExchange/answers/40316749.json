{"body": "<p>The <a href=\"http://www.sqlite.org/lang_expr.html#in_op\" rel=\"nofollow\">documentation</a> says:</p>\n\n<blockquote>\n  <p>The IN and NOT IN operators take a single scalar operand on the left</p>\n</blockquote>\n\n<p>So if you use a subquery on the left side, it is treated as a <a href=\"http://www.sqlite.org/lang_expr.html#subq\" rel=\"nofollow\">scalar subquery</a>, which does not behave as you want it to:</p>\n\n<blockquote>\n  <p>The result of the expression is the value of the only column in the first row returned by the SELECT statement. If the SELECT yields more than one result row, all rows after the first are ignored.</p>\n</blockquote>\n\n<p>To check for set coverage, you have to check if there is any element in the left set that is not in the right set:</p>\n\n<pre><code>WITH a(n) AS (\n  SELECT n\n  FROM nums\n  WHERE n &lt; 4\n),\nb(n) AS (\n  VALUES (1), (2), (3), (4)\n)\nSELECT *\nFROM a\nWHERE NOT EXISTS (SELECT 1\n                  FROM b\n                  WHERE b.n = a.n);\n</code></pre>\n", "tags": ["sql", "sqlite3"], "creation_date": 1477723396, "score": 0, "last_activity_date": 1477723396, "answer_id": 40316749, "is_accepted": true, "owner": {"user_id": 11654, "reputation": 94181, "user_type": "registered", "display_name": "CL.", "link": "http://stackoverflow.com/users/11654/cl", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG"}, "title": "sqlite IN check set coverage", "question_id": 40199548}