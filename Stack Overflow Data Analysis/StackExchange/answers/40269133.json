{"body": "<p>This is definitely the issue. More info from <a href=\"http://phillbarber.blogspot.ca/2014/02/lessons-learned-from-connection-leak-in.html\" rel=\"nofollow\">this blog post</a>. </p>\n\n<p>You can use <code>netstat -a  | grep CLOSE_WAIT | wc -l</code> to get the thread count.</p>\n\n<p>You can get a thread dump by running:</p>\n\n<p><code>jps</code>\nthen seeing what your app's process id is, and passing it to this command:\nTo obtain a thread dump using jstack, run the following command:</p>\n\n<p><code>jstack &lt;pid&gt;</code></p>\n\n<p>Run the same command every once in awhile and append to the same file. You need more than one dump, spaced apart in time to detect long running threads</p>\n\n<p><code>jstack &lt;pid&gt; &gt;&gt; threaddumps.log</code></p>\n\n<p>Then use a <a href=\"https://github.com/irockel/tda\" rel=\"nofollow\">thread dump analyzer</a> to compare your first dump and 2nd dump, to see what threads are running long by selecting multiple dumps, right clicking and choose \"Find long running threads\"</p>\n\n<p>You probably need to make sure you're closing a ClientResponse, as is being done here:</p>\n\n<pre><code>public boolean isSessionActive(HttpServletRequest httpRequest) {\n   ClientResponse response = null;\n   try{\n      response = jerseyClient\n         .resource(url)\n         .type(APPLICATION_JSON_TYPE)\n         .header(\"Cookie\", httpRequest.getHeader(\"Cookie\"))\n         .get(ClientResponse.class);\n      return response.getStatus() == SC_OK;\n   }\n   finally {\n      if (response != null){\n         // #############################################\n         // This next line is the fix you're looking for!\n         // #############################################\n         response.close();\n      }\n   }\n}\n</code></pre>\n", "tags": ["java", "rest", "jetty", "dropwizard"], "creation_date": 1477504732, "score": 0, "last_activity_date": 1477504732, "answer_id": 40269133, "is_accepted": false, "owner": {"user_id": 26510, "reputation": 14100, "user_type": "registered", "accept_rate": 99, "display_name": "Brad Parks", "link": "http://stackoverflow.com/users/26510/brad-parks", "profile_image": "https://www.gravatar.com/avatar/25ee9a1b9f5a16feb1432882a9ef2f06?s=128&d=identicon&r=PG"}, "title": "Dropwizard threads waiting count increases , server stops responding to all resource requests", "question_id": 27874894}