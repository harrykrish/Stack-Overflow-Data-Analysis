{"body": "<p>How @Louis say you  need to put bundles in your main.js file. Now I will describe my situation and how I solve it(it works for me). I have the sam problems and I find out how to fix it(it works for me).</p>\n\n<p><strong>First step (main.js)</strong></p>\n\n<p>Need to change main.js baseUrl to your js_build wich mean that after optimization your main.js file will use files from it.</p>\n\n<p>Your main.js file must look like this.</p>\n\n<pre><code>requierjs.config({\n    baseUrl: '/js_build',\n\n    paths: {\n        jquery: 'lib/jquery-2.1.4',\n        d3: 'lib/d3',\n        models: 'models',\n        views: 'views',\n        collections: 'collections', \n        templates: 'templates',\n        root: '',\n        bootstrap_typeahead: \"lib/bootstrap3-typeahead.min\",\n        bootstrap: 'lib/bootstrap/js/bootstrap.min',\n        bootstrap_treeview: 'lib/bootstrap-treeview',\n        select2: 'lib/select2.min',\n        numConvertor: 'lib/NumberConvertor',\n        sigma: 'lib/sigma/sigma',\n        script: 'lib/script',\n        noverlap: 'lib/sigma/plugins/sigma.layout.noverlap',\n        animate: 'lib/sigma/plugins/sigma.plugins.animate.min',\n        parallel: 'lib/sigma/plugins/sigma.renderers.parallelEdges.min',\n        edgeLabels: 'lib/sigma/plugins/sigma.renderers.edgeLabels.min',\n        relativeSize: 'lib/sigma/plugins/sigma.plugins.relativeSize.min',\n        neighborhood: 'lib/sigma/plugins/sigma.plugins.neighborhoods.min',\n        force: 'lib/sigma/plugins/sigma.layout.forceAtlas2.min',\n        sinon: 'test/lib/sinon-1.17.3',\n        jasmine: 'test/lib/jasmine-2.4.0/jasmine',\n        \"ga\": \"//www.google-analytics.com/analytics\",\n        \"stripe\": 'lib/Strip/stripe'\n    },\n\n    bundles: {\n         'any-name': [\n              //put your files here like ('views/someDir/somefile')\n         ]\n    },\n});\n</code></pre>\n\n<p>Name which you write in bundle must be the same in your build.js file modules.</p>\n\n<p><strong>Step 2 (build.js)</strong></p>\n\n<p>Need change build.js file you don't need mainConfig here you just need main module in modules. After changes your build.js will look like this.</p>\n\n<pre><code>{\n    \"baseUrl\" : \"../js\",\n    \"dir\": \"../js_build\",\n    \"optimize\": \"none\",\n    removeCombined: true,\n    modules: [\n        {\n            name: 'main',\n            include: ['main']\n        },\n        {\n            name: 'any-name', //any-name must be the same bundle name\n            create: true,\n            include: ['same files that which you give to bundle'],\n            exclude: ['main']\n        },\n\n    ],\n}\n</code></pre>\n\n<p><strong>step 3 (index.html)</strong></p>\n\n<p>need give requier.js us data-main  file located in your js_build/main.js. After editing it will look like this.</p>\n\n<pre><code>   &lt;script type=\"text/javascript\" data-main=\"/js_build/main.js\" src=\"/js/lib/require.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>P.S I solve my problems like this try it may help you.</p>\n", "tags": ["javascript", "gulp", "requirejs", "r.js"], "creation_date": 1477680184, "score": 3, "last_activity_date": 1477680184, "answer_id": 40311359, "is_accepted": true, "owner": {"user_id": 6009320, "reputation": 662, "user_type": "registered", "display_name": "V.S.V", "link": "http://stackoverflow.com/users/6009320/v-s-v", "profile_image": "https://i.stack.imgur.com/EuL9s.jpg?s=128&g=1"}, "title": "How to make r.js work with bundles", "question_id": 40225700}