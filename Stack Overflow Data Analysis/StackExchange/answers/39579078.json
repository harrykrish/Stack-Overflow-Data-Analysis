{"title": "Comparing two sets of array dates, and finding the closest key value of matching dates in PHP", "tags": ["php", "arrays", "date", "comparison"], "creation_date": 1474306911, "score": 0, "body": "<p>If I understood your problem, the code below will help you. I tested it if some arrays and it works fine.</p>\n\n<pre><code>function getClosetsDates ($A, $B) \n{\n  $answer = array();\n\n  foreach ($B as $stringDateToAnalyze) {\n    //create a DateTimeObject with your B date\n    $dateToAnalyze = new DateTime($stringDateToAnalyze);\n    //iterates over A and compare your date with each date in A\n    $keyOfClosestDate = 0;//consider the first date of A as the closest one\n    $previousDifference = 9999;\n\n    foreach ($A as $key =&gt; $stringDateToCompare) {\n      $dateToCompare = new DateTime($stringDateToCompare);\n      //compare your B date with the current A date\n      $difference = $dateToCompare-&gt;diff($dateToAnalyze)-&gt;days;\n      if ($difference &lt;= $previousDifference) {\n        $previousDifference = $difference;\n        $keyOfClosestDate = $key;\n        //you can unset $A[$key] if its not used anymore\n      }\n    }\n    $answer[] = $keyOfClosestDate;\n  }\n\n  return $answer;\n}\n</code></pre>\n\n<p>Below is an example I tested. I choose smaller arrays to improve the analysis of the solution.</p>\n\n<pre><code>$A = array\n(\n    '0'=&gt; \"2013-02-19\",\n    '1'=&gt; \"2013-02-22\",\n    '2'=&gt; \"2013-02-15\",\n    '3'=&gt; \"2013-01-29\",\n    '4'=&gt; \"2013-01-27\"\n);\n\n$B = array\n(\n    '0'=&gt; \"2013-02-18\",\n    '1'=&gt; \"2013-02-12\"\n);\n\nvar_dump(getClosetsDates($A,$B));\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>array(2) {\n  [0] =&gt;\n  int(0)\n  [1] =&gt;\n  int(2)\n}\n</code></pre>\n\n<p>If you need to do any improvements, I suggest the documentation for <a href=\"http://php.net/manual/pt_BR/datetime.diff.php\" rel=\"nofollow\">DateInterval</a> and the <a href=\"http://php.net/manual/pt_BR/datetime.diff.php\" rel=\"nofollow\">diff</a> method.</p>\n", "last_activity_date": 1474371341, "answer_id": 39579078, "is_accepted": true, "owner": {"user_id": 3943162, "reputation": 741, "user_type": "registered", "accept_rate": 96, "display_name": "James", "link": "http://stackoverflow.com/users/3943162/james", "profile_image": "https://i.stack.imgur.com/iMT42.jpg?s=128&g=1"}, "last_edit_date": 1474371341, "question_id": 39576276}