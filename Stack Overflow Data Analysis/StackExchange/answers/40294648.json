{"title": "mithril.js stuck in loop calling controller", "tags": ["mithril.js"], "creation_date": 1477604509, "score": 0, "body": "<p>My problem was I don't know javascript.  This works: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>//component\r\nvar tISM = {};\r\n\r\n//model\r\ntISM.Key = function(data) {\r\n\tthis.Id = m.prop(data.Id);\r\n\tthis.Name = m.prop(data.Name);\r\n\tthis.CreationTime = m.prop(data.CreationTime);\r\n}\r\ntISM = { \r\n\r\n\tkeys:  function(token) {\r\n\t\treturn m.request({\r\n\t\t\tmethod: \"POST\",\r\n\t\t       \turl: \"key/list\",\r\n\t\t\tdata: { \"token\": token },\r\n\t\t\ttype: tISM.Key\r\n\t\t})\r\n\t},\r\n};\r\n\r\n//controller\r\ntISM.controller = function() {\r\n\tthis.token = m.prop(\"\")\r\n\tthis.keys = m.prop([])\r\n\r\n\tthis.updateToken = function(token) {\r\n\t\tthis.token(token)\r\n\t\ttISM.keys(this.token).then(this.keys)\r\n\t}.bind(this)\r\n\r\n};\r\n\r\n//view\r\ntISM.view = function(ctrl) {\r\n\treturn m(\"div\"), [\r\n\t\tm(\"input\", {\r\n\t\t\toninput: m.withAttr(\"value\", ctrl.updateToken)\r\n\t\t}),\r\n\t\tm(\"ol\", ctrl.keys().map( function(key, index) {\r\n\t\t\treturn m(\"li\", key.Id, key.Name, key.CreationTime)\r\n\t\t})),\r\n\t]\r\n\r\n};\r\n\r\n\r\n//initialize\r\nm.mount(document.getElementById(\"app\"), tISM);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n", "last_activity_date": 1477758821, "answer_id": 40294648, "is_accepted": true, "owner": {"user_id": 6175437, "reputation": 1, "user_type": "registered", "display_name": "Theodore Cowan", "link": "http://stackoverflow.com/users/6175437/theodore-cowan", "profile_image": "https://lh4.googleusercontent.com/-u060PuF_oAA/AAAAAAAAAAI/AAAAAAAAAEc/OlP5uKQMEuA/photo.jpg?sz=128"}, "last_edit_date": 1477758821, "question_id": 40254689}