{"title": "How to implement endless loading in table or collection view?", "tags": ["ios", "objective-c", "json", "uitableview", "pagination"], "creation_date": 1409569345, "score": 4, "body": "<p>This is by no means easy.  IN GENERAL TERMS you need code that looks like this..</p>\n\n<p>Note the four very distinct parts of this fundamental routine.</p>\n\n<p>I have never found a working \"general\" package solution for this problem.</p>\n\n<p>Again, look to the \"four sections\" in this: they give the logic you're looking for!</p>\n\n<pre><code>-(void)forTerm:(NSString *)term doPageAfter:(int)doingThisPage\n  {\n\n  doingThisPage = doingThisPage + 1;\n  if ( doingThisPage &gt; 20 ) return; // never, ever, ever forget that!! heh.\n\n  [CLOUD search:term page:doingThisPage then:^(NSArray *thoseTenResults)\n    {\n\n\n\n\n    self.searchSpinner.hidden = YES;\n\n    // (step 1) IF IT IS \"PAGE 1\", we need to re-kick-off the array...\n    if ( doingThisPage == 1 )\n      CLOUD.searchResultsRA = [[NSMutableArray alloc] init];\n\n\n\n\n    // (step 2) go ahead and add on these results\n\n    if ( doingThisPage == 1 )\n      {\n      [CLOUD.searchResultsRA addObjectsFromArray:thoseTenResults];\n      [self.searchDisplay safelyReloadBouncyTable];\n      }\n    else\n      {\n      [self.searchDisplay.collectionView performBatchUpdates:^\n        {\n        NSUInteger oldSize = CLOUD.searchResultsRA.count;\n        [CLOUD.searchResultsRA addObjectsFromArray:thoseTenResults];\n        NSUInteger newSize = CLOUD.searchResultsRA.count;\n\n        NSMutableArray *arrayWithIndexPaths = [NSMutableArray array];\n        for (NSUInteger i = oldSize; i &lt; newSize; i++)\n          [arrayWithIndexPaths\n              addObject:[NSIndexPath indexPathForRow:i inSection:0]];\n\n        [self.searchDisplay justSignal];\n        [self.searchDisplay.collectionView\n           insertItemsAtIndexPaths:arrayWithIndexPaths];\n        }\n        completion:nil];\n      }\n\n\n\n\n    // (step 3) indeed if it's the first page, do a drop-in for fun\n    if ( doingThisPage == 1 ) [self.searchDisplay.view dropIn:nil];\n    // (for a \"new search\" which is now being displayed, in your UX\n    // there would be some sort of indication of that fact - do it here)\n\n\n\n\n    // (step 4) IF there WERE results .. try another page!\n    if ( thoseTenResults.count &gt; 0 )\n      [self forTerm:term doPageAfter:doingThisPage];\n      // note we are calling this same routine, again!!!\n    }\n    ];\n  }\n</code></pre>\n", "last_activity_date": 1476199953, "answer_id": 25604378, "is_accepted": false, "owner": {"user_id": 294884, "reputation": 15622, "user_type": "registered", "accept_rate": 89, "display_name": "Joe Blow", "link": "http://stackoverflow.com/users/294884/joe-blow", "profile_image": "https://www.gravatar.com/avatar/f8675693dfeb3908195657eb3a3fdda4?s=128&d=identicon&r=PG"}, "last_edit_date": 1476199953, "question_id": 25601280}