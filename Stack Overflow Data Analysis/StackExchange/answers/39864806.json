{"body": "<p>In general you cannot simply <em>add</em> instructions into an existing assembly listing and hope everything will work out as before. For example, the added instruction may modify some architectural state that changes the behavior of the following instructions.</p>\n\n<p>In your particular example, the <code>addq</code> instruction will overwrite the flags previously set by the prior <code>cmpl</code> instruction, so the conditional <code>jg</code> will do the wrong thing (looping forever in your case).</p>\n", "tags": ["gcc", "assembly", "instrumentation", "gas", "dwarf"], "creation_date": 1475636854, "score": 3, "last_activity_date": 1475636854, "answer_id": 39864806, "is_accepted": false, "owner": {"user_id": 149138, "reputation": 6036, "user_type": "registered", "accept_rate": 67, "display_name": "BeeOnRope", "link": "http://stackoverflow.com/users/149138/beeonrope", "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG"}, "title": "Instrumenting a benign instruction hangs the program", "question_id": 39864715}