{"body": "<p>So I got this working by taking my device tree blob, decompiling it, and merging in sections from the device tree overlay files, and recompiling.  I realized I needed uarts 1 and 2 instead of 2 and 4, so this is slightly different than my original problem.</p>\n\n<p>To decompile the device tree blob:</p>\n\n<pre><code>dtc -I dtb -O dts -o am335x-boneblack.dts am335x-boneblack.dtb\n</code></pre>\n\n<p>I used the existing uart0 as an example to show me the right sections to work in.</p>\n\n<p>I added a section for uart1 and uart2 in the pinmux section under the section for uart0.  It now looks like this:</p>\n\n<pre><code>pinmux_uart0_pins {\n    pinctrl-single,pins = &lt;0x170 0x30 0x174 0x0&gt;;\n    linux,phandle = &lt;0x27&gt;;\n    phandle = &lt;0x27&gt;;\n};\n\nbb_uart1_pins: pinmux_bb_uart1_pins {\n    pinctrl-single,pins = &lt;\n        0x184 0x20 /* P9.24 uart1_txd.uart1_txd  OUTPUT  */\n        0x180 0x20 /* P9.26 uart1_rxd.uart1_rxd  INPUT  */\n    &gt;;\n};\n\nbb_uart2_pins: pinmux_bb_uart2_pins {\n    pinctrl-single,pins = &lt;\n        0x150 0x21  /okay* spi0_sclk.uart2_rxd | MODE1 */\n        0x154 0x01  /* spi0_d0.uart2_txd | MODE1 */\n    &gt;;\n};\n</code></pre>\n\n<p>Then later, the serial sections need to be enabled and told what pins to use.  I modified existing uart sections, and it now looks like this:</p>\n\n<pre><code>serial@44e09000 {\n    compatible = \"ti,omap3-uart\";\n    ti,hwmods = \"uart1\";\n    clock-frequency = &lt;0x2dc6c00&gt;;\n    reg = &lt;0x44e09000 0x2000&gt;;\n    interrupts = &lt;0x48&gt;;\n    status = \"okay\";\n    dmas = &lt;0x26 0x1a 0x26 0x1b&gt;;\n    dma-names = \"tx\", \"rx\";\n    pinctrl-names = \"default\";\n    pinctrl-0 = &lt;0x27&gt;;\n};\n\nserial@48022000 {\n    compatible = \"ti,omap3-uart\";\n    ti,hwmods = \"uart2\";\n    clock-frequency = &lt;0x2dc6c00&gt;;\n    reg = &lt;0x48022000 0x2000&gt;;\n    interrupts = &lt;0x49&gt;;\n    status = \"okay\";\n    dmas = &lt;0x26 0x1c 0x26 0x1d&gt;;\n    dma-names = \"tx\", \"rx\";\n    pinctrl-names = \"default\";\n    pinctrl-0 = &lt;&amp;bb_uart1_pins&gt;;\n};\n\nserial@48024000 {\n    compatible = \"ti,omap3-uart\";\n    ti,hwmods = \"uart3\";\n    clock-frequency = &lt;0x2dc6c00&gt;;\n    reg = &lt;0x48024000 0x2000&gt;;\n    interrupts = &lt;0x4a&gt;;\n    status = \"okay\";\n    dmas = &lt;0x26 0x1e 0x26 0x1f&gt;;\n    dma-names = \"tx\", \"rx\";\n    pinctrl-names = \"default\";\n    pinctrl-0 = &lt;&amp;bb_uart2_pins&gt;;\n}\n</code></pre>\n\n<p>To recompile the device tree:</p>\n\n<pre><code>dtc -I dts -O dtb -o am335x-boneblack.dtb am335x-boneblack.dts\n</code></pre>\n\n<p>In short, I managed to get this working despite having little to no idea how device trees work.</p>\n\n<p>I also needed to disable hdmi which I did by setting status equal to \"disabled\" in the hdmi section.</p>\n", "tags": ["linux", "linux-kernel", "embedded", "beagleboneblack", "device-tree"], "creation_date": 1458839249, "score": 2, "last_activity_date": 1458839249, "answer_id": 36206015, "is_accepted": true, "owner": {"user_id": 2152798, "reputation": 160, "user_type": "registered", "accept_rate": 67, "display_name": "Dave", "link": "http://stackoverflow.com/users/2152798/dave", "profile_image": "https://www.gravatar.com/avatar/95bccc5e67ea5fda64ebae96e055bbf1?s=128&d=identicon&r=PG"}, "title": "Modifying the device tree for the Beaglebone Black", "question_id": 36090929}