{"title": "Populate a mongoose model with a field that isn&#39;t an id", "tags": ["node.js", "mongodb", "mongoose"], "creation_date": 1475657866, "score": 0, "body": "<p>This is supported since <strong>Mongoose 4.5</strong>, and is called <strong><a href=\"http://mongoosejs.com/docs/populate.html\" rel=\"nofollow\">virtuals population</a></strong>.</p>\n\n<p>You have to define your <strong>foreign keys relationships</strong> after your <strong>schemas definitions</strong> and before <strong>creating models</strong>, like this:</p>\n\n<pre><code>// Schema definitions\n\nBookSchema = new mongoose.Schema({\n        ...,\n        title: String,\n        author_id: Number,\n        ...\n    },\n    // schema options: Don't forget this option\n    // if you declare foreign keys for this schema afterwards.\n    {\n        toObject: {virtuals:true},\n        // use if your results might be retrieved as JSON\n        // see http://stackoverflow.com/q/13133911/488666\n        //toJSON: {virtuals:true} \n    });\n\nPersonSchema = new mongoose.Schema({id: Number, ...});\n\n\n// Foreign keys definitions\n\nBookSchema.virtual('author', {\n  ref: 'Person',\n  localField: 'author_id',\n  foreignField: 'id',\n  justOne: true // for many-to-1 relationships\n});\n\n\n// Models creation\n\nvar Book = mongoose.model('Book', BookSchema);\nvar Person = mongoose.model('Person', PersonSchema);\n\n\n// Querying\n\nBook.find({...})\n    // if you use select() be sure to include the foreign key field !\n    .select({.... author_id ....}) \n    // use the 'virtual population' name\n    .populate('author') \n    // hello callback hell... to browsers dev teams: async/await support please !\n    .exec(function(err, books) {...})\n</code></pre>\n", "last_activity_date": 1475659261, "answer_id": 39869551, "is_accepted": false, "owner": {"user_id": 488666, "reputation": 11605, "user_type": "registered", "accept_rate": 84, "display_name": "Frosty Z", "link": "http://stackoverflow.com/users/488666/frosty-z", "profile_image": "https://i.stack.imgur.com/5mhgK.jpg?s=128&g=1"}, "last_edit_date": 1475659261, "question_id": 19287142}