{"body": "<p>This has to do with a smaller number of runs not being accurate enough to get the timing resolution you want.</p>\n\n<p>As you increase the number of runs, the ratio between the times approaches the ratio between the number of runs:</p>\n\n<pre><code>&gt;&gt;&gt; def timeit_ratio(a, b):\n...     return timeit('unicodedata.category(chr)', setup = 'import unicodedata, random; chr=unichr(random.randint(0,50000))', number=a) / timeit('unicodedata.category(chr)', setup = 'import unicodedata, random; chr=unichr(random.randint(0,50000))', number=b)\n&gt;&gt;&gt; for i in range(32):\n...   r = timeit_ratio(2**(i+1), 2**i)\n...   print 2**i, 2**(i+1), r, abs(r - 2)**2  # mean squared error\n...\n1 2 3.0 1.0\n2 4 1.0 1.0\n4 8 1.5 0.25\n8 16 1.0 1.0\n16 32 0.316455696203 2.83432142285\n32 64 2.04 0.0016\n64 128 1.97872340426 0.000452693526483\n128 256 2.05681818182 0.00322830578512\n256 512 1.93333333333 0.00444444444444\n512 1024 2.01436781609 0.000206434139252\n1024 2048 2.18793828892 0.0353208004422\n2048 4096 1.98079658606 0.000368771106961\n4096 8192 2.11812990721 0.0139546749772\n8192 16384 2.15052027269 0.0226563524921\n16384 32768 1.93783596324 0.00386436746641\n32768 65536 2.28126901347 0.0791122579397\n65536 131072 2.18880312306 0.0356466192769\n131072 262144 1.8691643357 0.0171179710535\n262144 524288 2.02883451562 0.000831429291038\n524288 1048576 1.98259818317 0.000302823228866\n1048576 2097152 2.088684654 0.00786496785554\n2097152 4194304 2.02639479643 0.000696685278755\n4194304 8388608 1.98014042724 0.000394402630024\n8388608 16777216 1.98264956218 0.000301037692533\n</code></pre>\n", "tags": ["python", "performance", "optimization", "timeit"], "creation_date": 1475001786, "score": 8, "last_activity_date": 1475001786, "answer_id": 39732127, "is_accepted": true, "owner": {"user_id": 15055, "reputation": 94991, "user_type": "registered", "accept_rate": 81, "display_name": "Claudiu", "link": "http://stackoverflow.com/users/15055/claudiu", "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG"}, "title": "python&#39;s `timeit` doesn&#39;t always scale linearly with number?", "question_id": 39732027}