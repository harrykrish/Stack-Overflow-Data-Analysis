{"title": "Add React components from plain JavaScript", "tags": ["javascript", "reactjs", "redux"], "creation_date": 1477609791, "score": 1, "body": "<p>To render a React element, just call:</p>\n\n<pre><code>ReactDOM.render(react_element, dom_element);\n</code></pre>\n\n<p>Where dom_element is the place you want your react element to go in the page.  <a href=\"https://facebook.github.io/react/docs/rendering-elements.html\" rel=\"nofollow\">Relevant docs</a>.</p>\n\n<p>If you want to guard against multiple inclusion of JavaScript, just write your script so that it first checks if it has already run, and then exits immediately if it has.</p>\n\n<p>Of course, your widget will also need to load the React scripts and wait until they are ready before proceeding.  You can do that like this:</p>\n\n<pre><code>if (!window.MyWidgetPromise) {\n  window.MyWidgetPromise = script([\n    'https://unpkg.com/react@15/dist/react.js',\n    'https://unpkg.com/react-dom@15/dist/react-dom.js'       \n  ]).then(function() {\n    return React.createClass(...);\n  })\n}\nwindow.MyWidgetPromise.then(function(widget) {\n  ReactDOM.render(widget, TARGET_ELEMENT);\n})\n</code></pre>\n\n<p>Assuming you're using <a href=\"https://bradb.net/blog/promise-based-js-script-loader/\" rel=\"nofollow\">this promise-based script loader</a>.</p>\n\n<p>Alternatively, you could have the first inclusion of this widget render all instances of the widget that are needed in the page, and have subsequent inclusions do nothing, like so:</p>\n\n<pre><code>if (!window.MyWidgetPromise) {\n  window.MyWidgetPromise = script([\n    'https://unpkg.com/react@15/dist/react.js',\n    'https://unpkg.com/react-dom@15/dist/react-dom.js'       \n  }).then(function() {\n    var widget = React.createClass(...);\n    document.querySelector('my-widget').forEach(function(element) {\n      ReactDOM.render(widget, element);\n    })\n  })\n}\n</code></pre>\n\n<p>Though this would work better if it was wrapped in a document ready handler so you can be sure that all the effected elements will exist in the DOM before the querySelector runs.</p>\n", "last_activity_date": 1477611885, "answer_id": 40295574, "is_accepted": true, "owner": {"user_id": 2653, "reputation": 9193, "user_type": "registered", "accept_rate": 65, "display_name": "Nick Retallack", "link": "http://stackoverflow.com/users/2653/nick-retallack", "profile_image": "https://graph.facebook.com/6703391/picture?type=large"}, "last_edit_date": 1477611885, "question_id": 40295480}