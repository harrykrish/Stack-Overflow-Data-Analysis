{"title": "Input mask fields in Angular2 forms", "tags": ["forms", "input", "angular2", "mask"], "creation_date": 1466185633, "score": 9, "body": "\n\n<p>One way you could do it is using a directive that injects <code>NgControl</code> and manipulates the value</p>\n\n<p>(<em>for details see inline comments</em>)</p>\n\n<pre class=\"lang-ts prettyprint-override\"><code>@Directive({\n  selector: '[ngModel][phone]',\n  host: {\n    '(ngModelChange)': 'onInputChange($event)',\n    '(keydown.backspace)': 'onInputChange($event.target.value, true)'\n  }\n})\nexport class PhoneMask {\n  constructor(public model: NgControl) {}\n\n  onInputChange(event, backspace) {\n    // remove all mask characters (keep only numeric)\n    var newVal = event.replace(/\\D/g, '');\n    // special handling of backspace necessary otherwise\n    // deleting of non-numeric characters is not recognized\n    // this laves room for improvement for example if you delete in the \n    // middle of the string\n    if (backspace) {\n      newVal = newVal.substring(0, newVal.length - 1);\n    } \n\n    // don't show braces for empty value\n    if (newVal.length == 0) {\n      newVal = '';\n    } \n    // don't show braces for empty groups at the end\n    else if (newVal.length &lt;= 3) {\n      newVal = newVal.replace(/^(\\d{0,3})/, '($1)');\n    } else if (newVal.length &lt;= 6) {\n      newVal = newVal.replace(/^(\\d{0,3})(\\d{0,3})/, '($1) ($2)');\n    } else {\n      newVal = newVal.replace(/^(\\d{0,3})(\\d{0,3})(.*)/, '($1) ($2)-$3');\n    }\n    // set the new value\n    this.model.valueAccessor.writeValue(newVal);       \n  }\n}\n</code></pre>\n\n\n\n<pre class=\"lang-ts prettyprint-override\"><code>@Component({\n  selector: 'my-app',\n  providers: [],\n  template: `\n  &lt;form [ngFormModel]=\"form\"&gt;\n    &lt;input type=\"text\" phone [(ngModel)]=\"data\" ngControl=\"phone\"&gt; \n  &lt;/form&gt;\n  `,\n  directives: [PhoneMask]\n})\nexport class App {\n  constructor(fb: FormBuilder) {\n    this.form = fb.group({\n      phone: ['']\n    })\n  }\n}\n</code></pre>\n\n<p><a href=\"https://plnkr.co/edit/hWpNz1QYCBpTzKjXtnOr?p=preview\" rel=\"nofollow\"><strong>Plunker example</strong></a></p>\n", "last_activity_date": 1477332191, "answer_id": 37887432, "is_accepted": false, "owner": {"user_id": 217408, "reputation": 130599, "user_type": "registered", "accept_rate": 99, "display_name": "G&#252;nter Z&#246;chbauer", "link": "http://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer", "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1"}, "last_edit_date": 1477332191, "question_id": 37800841}