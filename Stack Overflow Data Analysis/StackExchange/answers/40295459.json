{"title": "Uploaded event on ZiggeoApi not being fired", "tags": ["javascript", "webrtc"], "creation_date": 1477608978, "score": 1, "body": "<p>v2 does not require the data parameter to pass the token as you can grab it at any point directly.</p>\n\n<p>To do that you would use the code such as this:</p>\n\n<pre><code>recorder.get('video');\n</code></pre>\n\n<p>Also it is good to mention that as soon as the upload is started the token is already available in both v1 and v2 so you should be able to grab them even then if needed.</p>\n\n<p>The <a href=\"https://ziggeo.com/docs/sdks\" rel=\"nofollow\">JavaScript SDK</a> documentation pages is relatively new, and the <a href=\"https://ziggeo.com/docs/sdks/javascript/browser-interaction/events\" rel=\"nofollow\">Events page</a> shows wrong code sample for v2 at the moment.</p>\n\n<p>Correct way to add it would be:</p>\n\n<pre><code>recorder.on(\"uploaded\", function() {\n  recorder.get('video');\n});\n</code></pre>\n\n<p>Adding a working sample showing both verified, uploading and uploaded events</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>ZiggeoApi.token = \"a48e03aee097e23697b165ad6060f32f\";\r\n\r\nZiggeoApi.Events.on(\"system_ready\", function() {\r\n  var element = document.getElementById('ziggeo-recorder-embedding');\r\n  var recorder = ZiggeoApi.V2.Recorder.findByElement( element );\r\n  \r\n  recorder.on('verified', function() {\r\n    console.log(\"video was verified. It's token is:\" + recorder.get('video') );\r\n  });\r\n  \r\n  recorder.on('uploading', function() {\r\n    console.log(\"video is uploading. It's token is:\" + recorder.get('video') );\r\n  });\r\n  \r\n  //Requires v1-r18 or higher to work\r\n  recorder.on('uploaded', function() {\r\n    console.log(\"video is uploaded. It's token is:\" + recorder.get('video') );\r\n  });\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;html&gt;\r\n  &lt;head&gt;\r\n    &lt;link rel=\"stylesheet\" href=\"https://assets-cdn.ziggeo.com/v1-r18/ziggeo.css\" /&gt;\r\n    &lt;script src=\"https://assets-cdn.ziggeo.com/v1-r18/ziggeo.js\"&gt;&lt;/script&gt;\r\n\r\n  &lt;/head&gt;\r\n  &lt;body&gt;\r\n    &lt;ziggeorecorder\r\n      ziggeo-width=\"640\"\r\n      ziggeo-height=\"480\"\r\n      id=\"ziggeo-recorder-embedding\"&gt;\r\n    &lt;/ziggeorecorder&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<ul>\n<li><p>The snippet might not work (depending on browser and its security settings) however using the same code on localhost or some server will.</p></li>\n<li><p>Good to mention also that <code>uploaded</code> event does in deed not seem to work at this point - so it is a bug.</p></li>\n</ul>\n\n<p>If it is in the documentation it is considered as something that should work (and was working), so if it is not, it is definitely some kind of a bug.</p>\n\n<p>To summarize, you did find a bug with <code>uploaded</code> event, however for what you are after you could use <code>uploading</code> event instead as so:</p>\n\n<pre><code>recorder.on(\"uploading\", function() {\n  recorder.get('video');\n});\n</code></pre>\n\n<p><strong>EDIT 2016/10/28</strong></p>\n\n<p>The <code>uploaded</code> event was actually introduced in r18, so it should work in r18, 19 and up.</p>\n\n<p>It will however not work on stable tag since it points currently to v1-r16 during which it was not available.</p>\n\n<ul>\n<li>I have updated the sample script above and the code on the docs page will be fixed soon as well.</li>\n</ul>\n", "last_activity_date": 1477672111, "answer_id": 40295459, "is_accepted": true, "owner": {"user_id": 6230588, "reputation": 131, "user_type": "registered", "display_name": "Bane D", "link": "http://stackoverflow.com/users/6230588/bane-d", "profile_image": "https://www.gravatar.com/avatar/6232949844c46336d1f21ccb91b33884?s=128&d=identicon&r=PG&f=1"}, "last_edit_date": 1477672111, "question_id": 40285073}