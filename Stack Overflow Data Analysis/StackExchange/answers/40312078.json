{"body": "<p>Thanks to Alexander B, I've been able to get what I wanted.</p>\n\n<h1>Eager Singleton</h1>\n\n<p>I resolved the <code>on start</code> function call with the <a href=\"https://www.playframework.com/documentation/2.5.x/JavaDependencyInjection#Eager-bindings\" rel=\"nofollow\"><code>eager singleton</code></a>.</p>\n\n<p>What I've done is a class for the TVDB things and the important part is to write what you want to do on start <strong>inside the constructor</strong> of this class. And then to <code>bind</code> it on a module:</p>\n\n<pre><code>bind(TVDB.class).asEagerSingleton();\n</code></pre>\n\n<h1>Akka actors</h1>\n\n<p>For the <code>periodically</code> function call I used an <a href=\"https://www.playframework.com/documentation/2.5.x/JavaAkka\" rel=\"nofollow\"><code>Akka actor</code></a>.</p>\n\n<p>I've implemented an actor which <strong>calls itself</strong> every 12 hours, so I placed the scheduling code in the same actor on the <code>preStart</code> void. I think the Playframework documentation for the <code>Scheduling asynchronous tasks</code> isn't updated and doesn't work the way it is (at least for me).</p>\n\n<p>Then, I binded it on the module:</p>\n\n<pre><code>bindActor(TVDBActor.class, \"TVDBActor\");\n</code></pre>\n\n<p>If someone need the actor code here it is:</p>\n\n<pre><code>public class TVDBActor extends UntypedActor {\n\n  @Inject\n  public void preStart(final ActorSystem system, @Named(\"TVDBActor\") ActorRef tvdbActor) {\n    system.scheduler().schedule(\n      Duration.create(12, TimeUnit.HOURS),\n      Duration.create(12, TimeUnit.HOURS),\n      tvdbActor,\n      \"tick\",\n      system.dispatcher(),\n      null\n    );\n  }\n\n  @Override\n  public void onReceive(Object msg) throws Exception {\n    TVDB.refreshToken();\n  }\n\n}\n</code></pre>\n", "tags": ["java", "web-services", "scheduled-tasks", "playframework-2.5", "onstart"], "creation_date": 1477683288, "score": 0, "last_activity_date": 1477683288, "answer_id": 40312078, "is_accepted": true, "owner": {"user_id": 2391390, "reputation": 1, "user_type": "registered", "display_name": "rcanovas", "link": "http://stackoverflow.com/users/2391390/rcanovas", "profile_image": "https://www.gravatar.com/avatar/93a41ef056d02712912ff63d6326921c?s=128&d=identicon&r=PG"}, "title": "How can I call a function on start and periodically on Playframework 2.5", "question_id": 40284465}