{"title": "Circle Piping to and from 2 Python Subprocesses", "tags": ["python-3.x", "subprocess", "infinite-loop", "communication", "popen"], "creation_date": 1472572811, "score": 0, "body": "<p>Problem is here</p>\n\n<pre><code>while True:\n    b.stdin.write(str(temp))\n    temp = b.communicate()[0]\n    print temp\n    c.stdin.write(str(temp))\n    temp = c.communicate()[0]\n    print temp\n</code></pre>\n\n<p>Once <code>communicate</code> has returned, it does noting more. You have to run the process again. Plus you don't need 2 processes open at the same time.</p>\n\n<p>Plus the init phase is not different from the running phase, except that you provide the input data.</p>\n\n<p>what you could do to simplify and make it work:</p>\n\n<pre><code>from subprocess import *\ncall([\"gcc\",\"2.c\"])\ntemp = str(0)\n\nwhile True:\n    b = Popen([\"./a.out\"],stdin=PIPE,stdout=PIPE) #The 2 processes in question\n    b.stdin.write(temp)\n    temp = b.communicate()[0]\n    print temp\n    b.wait()\n</code></pre>\n\n<p>Else, to see 2 processes running in parallel, proving that you can do that, just fix your loop as follows (by moving the <code>Popen</code> calls in the loop):</p>\n\n<pre><code>while True:\n\n    b = Popen([\"./a.out\"],stdin=PIPE,stdout=PIPE) #The 2 processes in question\n    c = Popen([\"./a.out\"],stdin=PIPE,stdout=PIPE)\n\n    b.stdin.write(str(temp))\n    temp = b.communicate()[0]\n    print temp\n    c.stdin.write(str(temp))\n    temp = c.communicate()[0]\n    print temp\n</code></pre>\n\n<p>better yet. b output feeds c input:</p>\n\n<pre><code>while True:\n\n    b = Popen([\"./a.out\"],stdin=PIPE,stdout=PIPE) #The 2 processes in question\n    c = Popen([\"./a.out\"],stdin=b.stdout,stdout=PIPE)\n\n    b.stdin.write(str(temp))\n    temp = c.communicate()[0]\n    print temp\n</code></pre>\n", "last_activity_date": 1472579532, "answer_id": 39232236, "is_accepted": true, "owner": {"user_id": 6451573, "reputation": 14599, "user_type": "registered", "accept_rate": 83, "display_name": "Jean-Fran&#231;ois Fabre", "link": "http://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre", "profile_image": "https://i.stack.imgur.com/zE16s.jpg?s=128&g=1"}, "last_edit_date": 1472579532, "question_id": 39232164}