{"title": "How to prevent IE11 and Microsoft Edge from throttling events aggressively?", "tags": ["javascript", "microsoft-edge"], "creation_date": 1477493732, "score": 4, "body": "<p>Here is an example that uses <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame\" rel=\"nofollow\">requestAnimationFrame</a>.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var container = document.getElementById(\"container\");\r\nvar contents = document.getElementById(\"contents\");\r\nvar input = document.getElementById(\"iterations\");\r\n\r\nvar posX = 50;\r\nvar posY = 50;\r\nvar previousX = null;\r\nvar previousY = null;\r\n\r\nvar mousedownHandler = function (e) {\r\n    window.onmousemove = globalMousemoveHandler;\r\n    window.onmouseup = globalMouseupHandler;\r\n    previousX = e.clientX;\r\n    previousY = e.clientY;\r\n}\r\n\r\nvar globalMousemoveHandler = function (e) {\r\n    posX += e.clientX - previousX;\r\n    posY += e.clientY - previousY;\r\n    previousX = e.clientX;\r\n    previousY = e.clientY;\r\n  \r\n    window.requestAnimationFrame(function () {        \r\n      var now = Date.now();\r\n      for (var i = 0, n = parseInt(input.value); i &lt; n; i++);\r\n      var elapsed = Date.now() - now;\r\n\r\n      contents.style.transform = \"translate3d(\" + posX + \"px, \" + posY + \"px, 0)\";\r\n      contents.innerText = elapsed + \"ms\";\r\n    });\r\n}\r\n\r\nvar globalMouseupHandler = function (e) {\r\n    window.onmousemove = null;\r\n    window.onmouseup = null;\r\n    previousX = null;\r\n    previousY = null;\r\n}\r\n\r\ncontainer.onmousedown = mousedownHandler;\r\ncontents.style.transform = \"translate3d(\" + posX + \"px, \" + posY + \"px, 0)\";</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#container {\r\n  height: 180px;\r\n  width: 600px;\r\n  background-color: #ccc;\r\n  overflow: hidden;\r\n  cursor: -webkit-grab;\r\n  cursor: -moz-grab;\r\n  cursor: grab;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n#container:active {\r\n  cursor: move;\r\n  cursor: -webkit-grabbing;\r\n  cursor: -moz-grabbing;\r\n  cursor: grabbing;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;label&gt;Iterations: &lt;input id=\"iterations\" type=\"number\" value=\"20000000\" step=\"5000000\" /&gt;&lt;/label&gt;\r\n\r\n&lt;div id=\"container\"&gt;\r\n    &lt;div id=\"contents\"&gt;\r\n        Pannable container contents...\r\n    &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This stops the heavy lifting from blocking the handler function, effectively preventing the issue from happening, at the cost of a 16ms increased latency.</p>\n", "last_activity_date": 1477495343, "answer_id": 40265594, "is_accepted": true, "owner": {"user_id": 6870228, "reputation": 1458, "user_type": "registered", "display_name": "Keith", "link": "http://stackoverflow.com/users/6870228/keith", "profile_image": "https://www.gravatar.com/avatar/13425c63b585e3bba05d30509e9e2b00?s=128&d=identicon&r=PG&f=1"}, "last_edit_date": 1477495343, "question_id": 40265157}